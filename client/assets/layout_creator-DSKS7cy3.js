import{c as L,j as t,f as je,P as ye,R,a as ee,g as he,S as re,B as x,T as M,r as te,h as ne,M as oe,i as ae,k as me,n as xe,m as ve,v as Te,G as j,o as we}from"./main-CRYehfDl.js";const Ce=L(t.jsx("path",{d:"M13 6.99h3L12 3 8 6.99h3v10.02H8L12 21l4-3.99h-3z"})),Oe=L(t.jsx("path",{d:"M5.33 20H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h1.33c1.1 0 2 .9 2 2v12c0 1.1-.89 2-2 2M22 18V6c0-1.1-.9-2-2-2h-1.33c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2H20c1.11 0 2-.9 2-2m-7.33 0V6c0-1.1-.9-2-2-2h-1.33c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h1.33c1.1 0 2-.9 2-2"})),Me=L(t.jsx("path",{d:"M13 13v8h8v-8zM3 21h8v-8H3zM3 3v8h8V3zm13.66-1.31L11 7.34 16.66 13l5.66-5.66z"}));function Se({id:e,children:r}){const{attributes:n,listeners:s,setNodeRef:c,transform:i}=je({id:e}),l=i?{transform:`translate3d(${i.x}px, ${i.y}px, 0)`}:void 0;return t.jsx(ye,{ref:c,sx:{...l,p:2.5,borderRadius:2},...s,...n,children:r})}const $e=()=>{const{borderRadius:e}=ee();return t.jsxs(re,{direction:"column",spacing:1,alignItems:"center",children:[t.jsx(x,{sx:{bgcolor:"background.paper",width:58,height:58,borderRadius:te[e],display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Me,{})}),t.jsxs(M,{variant:"body2",color:"secondary",textAlign:"center",children:["Cliquez sur le bouton ",t.jsx("strong",{children:"Widget"})," et faites-le glisser votre widget ici."]})]})};function Ae({column:e,columnIndex:r,rowIndex:n,children:s,widthConfigButton:c}){const[i,l]=R.useState(null),y=!!i,$=a=>{l(a.currentTarget)},C=()=>{l(null)},{borderRadius:O}=ee(),b={xs:{label:"Étroite",value:"xs"},sm:{label:"Petite",value:"sm"},md:{label:"Moyenne",value:"md"},lg:{label:"Large",value:"lg"}},{isOver:h,setNodeRef:A}=he({id:e.id});return t.jsxs(re,{spacing:1,children:[t.jsx(x,{children:t.jsxs(M,{variant:"caption",margin:0,color:"secondary",lineHeight:0,children:[e.widgets.length," widgets"]})}),t.jsx(x,{ref:A,sx:{minHeight:400,p:2.5,borderRadius:te[O],bgcolor:h?"primary.50":"transparent",border:"2px dashed",borderColor:h?"primary.main":"divider",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},children:R.Children.count(s)===0?t.jsx($e,{}):s}),c&&t.jsxs(t.Fragment,{children:[t.jsx(x,{display:"flex",justifyContent:"center",children:t.jsx(ne,{id:"width-button",clickable:!0,label:e.width&&b[e.width]?b[e.width].label:"Width",size:"small","aria-controls":y?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":y?"true":void 0,onClick:$,icon:t.jsx(Ce,{sx:{rotate:"90deg"}})})}),t.jsx(oe,{id:"basic-menu",anchorEl:i,open:y,onClose:C,slotProps:{list:{"aria-labelledby":"basic-button"}},children:Object.values(b).map(a=>t.jsx(ae,{onClick:()=>{me(n,r,a.value),C()},children:a.label},a.value))})]})]})}var se=typeof global=="object"&&global&&global.Object===Object&&global,Pe=typeof self=="object"&&self&&self.Object===Object&&self,u=se||Pe||Function("return this")(),S=u.Symbol,ie=Object.prototype,Ee=ie.hasOwnProperty,ke=ie.toString,m=S?S.toStringTag:void 0;function Ie(e){var r=Ee.call(e,m),n=e[m];try{e[m]=void 0;var s=!0}catch{}var c=ke.call(e);return s&&(r?e[m]=n:delete e[m]),c}var Re=Object.prototype,Ve=Re.toString;function Be(e){return Ve.call(e)}var Fe="[object Null]",ze="[object Undefined]",N=S?S.toStringTag:void 0;function T(e){return e==null?e===void 0?ze:Fe:N&&N in Object(e)?Ie(e):Be(e)}function D(e){return e!=null&&typeof e=="object"}var We=Array.isArray;function ce(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Le="[object AsyncFunction]",De="[object Function]",Ne="[object GeneratorFunction]",Ue="[object Proxy]";function le(e){if(!ce(e))return!1;var r=T(e);return r==De||r==Ne||r==Le||r==Ue}var k=u["__core-js_shared__"],U=(function(){var e=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function _e(e){return!!U&&U in e}var He=Function.prototype,Ge=He.toString;function g(e){if(e!=null){try{return Ge.call(e)}catch{}try{return e+""}catch{}}return""}var qe=/[\\^$.*+?()[\]{}|]/g,Ke=/^\[object .+?Constructor\]$/,Je=Function.prototype,Xe=Object.prototype,Qe=Je.toString,Ye=Xe.hasOwnProperty,Ze=RegExp("^"+Qe.call(Ye).replace(qe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function er(e){if(!ce(e)||_e(e))return!1;var r=le(e)?Ze:Ke;return r.test(g(e))}function rr(e,r){return e?.[r]}function w(e,r){var n=rr(e,r);return er(n)?n:void 0}var V=w(u,"WeakMap"),tr=9007199254740991;function ue(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=tr}function nr(e){return e!=null&&ue(e.length)&&!le(e)}var or=Object.prototype;function de(e){var r=e&&e.constructor,n=typeof r=="function"&&r.prototype||or;return e===n}var ar="[object Arguments]";function _(e){return D(e)&&T(e)==ar}var pe=Object.prototype,sr=pe.hasOwnProperty,ir=pe.propertyIsEnumerable,cr=_((function(){return arguments})())?_:function(e){return D(e)&&sr.call(e,"callee")&&!ir.call(e,"callee")};function lr(){return!1}var ge=typeof exports=="object"&&exports&&!exports.nodeType&&exports,H=ge&&typeof module=="object"&&module&&!module.nodeType&&module,ur=H&&H.exports===ge,G=ur?u.Buffer:void 0,dr=G?G.isBuffer:void 0,pr=dr||lr,gr="[object Arguments]",br="[object Array]",fr="[object Boolean]",jr="[object Date]",yr="[object Error]",hr="[object Function]",mr="[object Map]",xr="[object Number]",vr="[object Object]",Tr="[object RegExp]",wr="[object Set]",Cr="[object String]",Or="[object WeakMap]",Mr="[object ArrayBuffer]",Sr="[object DataView]",$r="[object Float32Array]",Ar="[object Float64Array]",Pr="[object Int8Array]",Er="[object Int16Array]",kr="[object Int32Array]",Ir="[object Uint8Array]",Rr="[object Uint8ClampedArray]",Vr="[object Uint16Array]",Br="[object Uint32Array]",o={};o[$r]=o[Ar]=o[Pr]=o[Er]=o[kr]=o[Ir]=o[Rr]=o[Vr]=o[Br]=!0;o[gr]=o[br]=o[Mr]=o[fr]=o[Sr]=o[jr]=o[yr]=o[hr]=o[mr]=o[xr]=o[vr]=o[Tr]=o[wr]=o[Cr]=o[Or]=!1;function Fr(e){return D(e)&&ue(e.length)&&!!o[T(e)]}function zr(e){return function(r){return e(r)}}var be=typeof exports=="object"&&exports&&!exports.nodeType&&exports,v=be&&typeof module=="object"&&module&&!module.nodeType&&module,Wr=v&&v.exports===be,I=Wr&&se.process,q=(function(){try{var e=v&&v.require&&v.require("util").types;return e||I&&I.binding&&I.binding("util")}catch{}})(),K=q&&q.isTypedArray,Lr=K?zr(K):Fr;function Dr(e,r){return function(n){return e(r(n))}}var Nr=Dr(Object.keys,Object),Ur=Object.prototype,_r=Ur.hasOwnProperty;function Hr(e){if(!de(e))return Nr(e);var r=[];for(var n in Object(e))_r.call(e,n)&&n!="constructor"&&r.push(n);return r}var B=w(u,"Map"),F=w(u,"DataView"),z=w(u,"Promise"),W=w(u,"Set"),J="[object Map]",Gr="[object Object]",X="[object Promise]",Q="[object Set]",Y="[object WeakMap]",Z="[object DataView]",qr=g(F),Kr=g(B),Jr=g(z),Xr=g(W),Qr=g(V),p=T;(F&&p(new F(new ArrayBuffer(1)))!=Z||B&&p(new B)!=J||z&&p(z.resolve())!=X||W&&p(new W)!=Q||V&&p(new V)!=Y)&&(p=function(e){var r=T(e),n=r==Gr?e.constructor:void 0,s=n?g(n):"";if(s)switch(s){case qr:return Z;case Kr:return J;case Jr:return X;case Xr:return Q;case Qr:return Y}return r});var Yr="[object Map]",Zr="[object Set]",et=Object.prototype,rt=et.hasOwnProperty;function tt(e){if(e==null)return!0;if(nr(e)&&(We(e)||typeof e=="string"||typeof e.splice=="function"||pr(e)||Lr(e)||cr(e)))return!e.length;var r=p(e);if(r==Yr||r==Zr)return!e.size;if(de(e))return!Hr(e).length;for(var n in e)if(rt.call(e,n))return!1;return!0}function ot(){const[e,r]=R.useState(null),n=!!e,s=a=>{r(a.currentTarget)},c=()=>{r(null)},{currentView:i}=xe();if(!i)return t.jsx("div",{children:"Chargement du layout…"});const{rows:l,module:y,view_type:$}=i,C={xs:4,sm:5,md:7,lg:8},O=[1,2,3,4],b=ve.find(a=>a.name===y),h=Te.find(a=>a.id===$);function A(a){return C[a]||1}return t.jsxs(j,{container:!0,spacing:2,children:[t.jsxs(j,{children:[t.jsx(M,{variant:"h3",fontWeight:"bolder",children:b?b.label.toLocaleUpperCase():"Module"}),h&&t.jsxs(M,{variant:"body2",color:"text.secondary",textTransform:"uppercase",lineHeight:.5,children:["NOUVELLE VUE DE ",h?.label]})]}),l&&!tt(l)?l.map((a,P)=>{const fe=a.columns.length;return t.jsxs(j,{container:!0,spacing:1,size:12,children:[t.jsx(j,{size:12,children:t.jsxs(x,{textAlign:"center",children:[t.jsx(ne,{id:"row-selector-button",clickable:!0,label:a.columns.length?`${a.columns.length} Colonnes`:"Colonnes",size:"small","aria-controls":n?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":n?"true":void 0,onClick:s,icon:t.jsx(Oe,{}),sx:{bgcolor:"transparent","&:hover":{bgcolor:"secondary"}}}),t.jsx(oe,{id:"row-select-menu",anchorEl:e,open:n,onClose:c,slotProps:{list:{"aria-labelledby":"basic-button"}},children:O&&O.map((d,E)=>t.jsxs(ae,{"data-value":d,onClick:f=>{f.currentTarget.dataset.value,we(P,Number(f.currentTarget.dataset.value)),c()},children:[d," Colonnes"]},E))})]})}),t.jsx(j,{container:!0,size:12,flexWrap:"nowrap",children:a.columns.map((d,E)=>t.jsx(j,{style:{flex:A(d.width??"xs"),minWidth:0},children:t.jsx(Ae,{column:d,columnIndex:E,rowIndex:P,widthConfigButton:fe>1,children:d.widgets.map(f=>t.jsx(Se,{id:f,children:f},f))})},d.id))})]},P)}):null]})}export{ot as component};
